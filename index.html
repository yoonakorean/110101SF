<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>1-1 å¥å‹å¡«ç©ºæŒ‘æˆ°</title>
<style>
body { font-family: sans-serif; max-width: 600px; margin: auto; text-align: center; padding: 30px 15px; }
#logo, #logo-game { width: 150px; max-width: 80%; margin-bottom: 10px; display: block; margin-left: auto; margin-right: auto; }
#game-title { font-size: 24px; font-weight: bold; margin-bottom: 10px; }
button { display: block; width: 80%; max-width: 300px; margin: 10px auto; padding: 12px 20px; font-size: 16px; cursor: pointer; }
#check-btn, #next-btn { width: 150px; }
.hidden { display: none; }
.fill-input { width: 120px; padding: 5px; font-size: 16px; text-align:center; }
.question-ko { font-size: 20px; margin: 15px 0; }
.question-ch { font-size: 20px; margin-bottom: 15px; font-weight: bold; }
audio { width: 100%; max-width: 400px; margin-top: 10px; }

#name-form { text-align: center; margin-top: 30px; }
#name-form input { font-size: 20px; padding: 10px; width: 80%; max-width: 300px; display: block; margin: 10px auto; }
#name-form button { font-size: 18px; padding: 10px 20px; }
</style>
</head>
<body>

<!-- æ¨¡å¼é¸æ“‡ -->
<div id="mode-select">
  <img id="logo" src="logo.png" alt="Logo" />
  <h2>è«‹é¸æ“‡æ¨¡å¼</h2>
  <button id="mode-practice-btn">ç·´ç¿’æ¨¡å¼ï¼ˆç„¡æ™‚é–“é™åˆ¶ï¼‰</button>
  <button id="mode-challenge-btn">æŒ‘æˆ°æ¨¡å¼ï¼ˆé™æ™‚ï¼‰</button>
</div>

<!-- éŠæˆ²ç•«é¢ -->
<div id="game-area" class="hidden">
  <img id="logo-game" src="logo.png" alt="Logo"/>
  <div id="game-title">1-1 å¥å‹å¡«ç©ºæŒ‘æˆ°</div>
  <div id="question-number"></div>
  <div id="timer" style="font-size:18px; color:red; margin-bottom:15px;"></div>
  <div class="question-ch" id="question-ch"></div>
  <div class="question-ko" id="question-ko"></div>
  <div id="result" style="min-height: 60px; margin-top: 10px;"></div>
  <button id="check-btn" disabled>ç¢ºèª</button>
  <button id="next-btn" style="display:none;">ä¸‹ä¸€é¡Œ</button>
</div>

<!-- å®Œæˆé é¢ -->
<div id="end-screen" class="hidden">
  <h2>ğŸ‰ å…¨éƒ¨å®Œæˆï¼</h2>
  <form id="name-form">
    <label for="username">è«‹è¼¸å…¥å§“åï¼š</label>
    <input type="text" id="username" name="username" required />
    <input type="hidden" id="score" name="score" />
    <input type="hidden" id="time" name="time" />
    <button type="submit">å›å‚³æˆç¸¾</button>
  </form>
</div>

<script>
const questions = [
  { audio: "11010101S.mp3", question: "ï¼¿ï¼¿ê°€ ìˆì–´ìš”?", answer: "ì»¤í”¼", full: "ì»¤í”¼ê°€ ìˆì–´ìš”?", chinese: "æœ‰å’–å•¡å—ï¼Ÿ" },
  { audio: "11010102S.mp3", question: "ï¼¿ï¼¿ ï¼¿ï¼¿ê°€ ìˆì–´ìš”.", answer: "í•œêµ­ ì¹œêµ¬", full: "í•œêµ­ ì¹œêµ¬ê°€ ìˆì–´ìš”.", chinese: "æœ‰éŸ“åœ‹æœ‹å‹ã€‚" },
  { audio: "11010103S.mp3", question: "ï¼¿ï¼¿ì´ ìˆì–´ìš”?", answer: "ë¬¼", full: "ë¬¼ì´ ìˆì–´ìš”?", chinese: "æœ‰æ°´å—ï¼Ÿ" },
  { audio: "11010104S.mp3", question: "ï¼¿ï¼¿ì´ ìˆì–´ìš”.", answer: "ì—¬ê¶Œ", full: "ì—¬ê¶Œì´ ìˆì–´ìš”.", chinese: "æœ‰è­·ç…§ã€‚" },
  { audio: "11010105S.mp3", question: "ï¼¿ï¼¿ê°€ ìˆì–´ìš”.", answer: "íœ´ì§€", full: "íœ´ì§€ê°€ ìˆì–´ìš”.", chinese: "æœ‰è¡›ç”Ÿç´™ã€‚" },
  { audio: "11010106S.mp3", question: "ï¼¿ï¼¿ì´ ì—†ì–´ìš”.", answer: "ìš°ì‚°", full: "ìš°ì‚°ì´ ì—†ì–´ìš”.", chinese: "æ²’æœ‰é›¨å‚˜ã€‚" },
  { audio: "11010107S.mp3", question: "ï¼¿ï¼¿ì´ ì—†ì–´ìš”.", answer: "ë¹µ", full: "ë¹µì´ ì—†ì–´ìš”.", chinese: "æ²’æœ‰éºµåŒ…ã€‚" },
  { audio: "11010108S.mp3", question: "ï¼¿ï¼¿ì´ ì—†ì–´ìš”.", answer: "ì‹œê°„", full: "ì‹œê°„ì´ ì—†ì–´ìš”.", chinese: "æ²’æœ‰æ™‚é–“ã€‚" },
  { audio: "11010109S.mp3", question: "ï¼¿ï¼¿ê°€ ìˆì–´ìš”?", answer: "ë‹´ìš”", full: "ë‹´ìš”ê°€ ìˆì–´ìš”?", chinese: "æœ‰æ¯›æ¯¯å—ï¼Ÿ" },
  { audio: "11010110S.mp3", question: "ï¼¿ï¼¿ì´ ìˆì–´ìš”?", answer: "í™”ì¥ì‹¤", full: "í™”ì¥ì‹¤ì´ ìˆì–´ìš”?", chinese: "æœ‰å»æ‰€å—ï¼Ÿ" },
  { audio: "11010111S.mp3", question: "ï¼¿ï¼¿ê°€ ì—†ì–´ìš”.", answer: "ê°•ì•„ì§€", full: "ê°•ì•„ì§€ê°€ ì—†ì–´ìš”.", chinese: "æ²’æœ‰å°ç‹—ã€‚" },
  { audio: "11010112S.mp3", question: "ï¼¿ï¼¿ê°€ ì—†ì–´ìš”.", answer: "ìš°ìœ ", full: "ìš°ìœ ê°€ ì—†ì–´ìš”.", chinese: "æ²’æœ‰ç‰›å¥¶ã€‚" }
];

const modeSelectDiv=document.getElementById("mode-select");
const gameAreaDiv=document.getElementById("game-area");
const questionNumberDiv=document.getElementById("question-number");
const questionChDiv=document.getElementById("question-ch");
const questionKoDiv=document.getElementById("question-ko");
const resultDiv=document.getElementById("result");
const checkBtn=document.getElementById("check-btn");
const nextBtn=document.getElementById("next-btn");
const timerDiv=document.getElementById("timer");
const endScreen=document.getElementById("end-screen");
const scoreInput=document.getElementById("score");
const timeInput=document.getElementById("time");

let shuffledQuestions=[],current=0,correct=0,mode="practice";
let timer=null,timeLeft=0,totalTime=0;

function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr;}

function showMode(m){
  mode=m;
  modeSelectDiv.style.display="none";
  gameAreaDiv.classList.remove("hidden");
  shuffledQuestions=shuffle([...questions]);
  current=0;correct=0;
  if(mode==="challenge"){timeLeft=60*shuffledQuestions.length;startTimer();}
  loadQuestion();
}

function startTimer(){
  totalTime=0;
  timer=setInterval(()=>{
    timeLeft--; totalTime++;
    timerDiv.textContent=`å‰©é¤˜æ™‚é–“ï¼š${timeLeft} ç§’`;
    if(timeLeft<=0){clearInterval(timer);endGame();}
  },1000);
}

function loadQuestion(){
  if(current>=shuffledQuestions.length){endGame();return;}
  const q=shuffledQuestions[current];
  questionNumberDiv.textContent=`ç¬¬ ${current+1} é¡Œ / å…± ${shuffledQuestions.length} é¡Œ`;
  questionChDiv.textContent="é¡Œç›®ï¼š" + q.chinese;

  const parts=q.question.split("ï¼¿ï¼¿");
  let html="";
  for(let i=0;i<parts.length;i++){
    html+=parts[i];
    if(i<parts.length-1){
      html+=`<input type="text" class="fill-input" id="fill-${i}" />`;
    }
  }
  questionKoDiv.innerHTML=html;
  resultDiv.innerHTML="";
  checkBtn.disabled=true; nextBtn.style.display="none";

  document.querySelectorAll(".fill-input").forEach(inp=>{
    inp.addEventListener("input",()=>{checkBtn.disabled=[...document.querySelectorAll(".fill-input")].some(x=>x.value.trim()==="");});
  });
}

checkBtn.addEventListener("click",()=>{
  const q=shuffledQuestions[current];
  const userAns=[...document.querySelectorAll(".fill-input")].map(x=>x.value.trim()).join(" ");
  if(userAns===q.answer){resultDiv.innerHTML=`âœ… ç­”å°äº†ï¼<br><strong>${q.full}</strong><br><audio controls src="${q.audio}"></audio>`; correct++;}
  else{resultDiv.innerHTML=`âŒ éŒ¯èª¤<br>æ­£ç¢ºç­”æ¡ˆï¼š<strong>${q.full}</strong><br><audio controls src="${q.audio}"></audio>`;}
  checkBtn.disabled=true; nextBtn.style.display="inline-block";
});

nextBtn.addEventListener("click",()=>{current++; loadQuestion();});

function endGame(){
  clearInterval(timer);
  gameAreaDiv.classList.add("hidden");
  // éš±è—é¡Œç›®/ç­”æ¡ˆï¼Œåªé¡¯ç¤ºå›å‚³è¡¨å–®
  questionNumberDiv.textContent="";
  questionChDiv.textContent="";
  questionKoDiv.textContent="";
  resultDiv.innerHTML="";
  checkBtn.style.display="none"; nextBtn.style.display="none";

  scoreInput.value=`${correct} / ${shuffledQuestions.length}`;
  timeInput.value=`${totalTime} ç§’`;
  endScreen.classList.remove("hidden");
}

document.getElementById("mode-practice-btn").addEventListener("click",()=>showMode("practice"));
document.getElementById("mode-challenge-btn").addEventListener("click",()=>showMode("challenge"));

document.getElementById("name-form").addEventListener("submit",function(e){
  e.preventDefault();
  alert(`å§“åï¼š${document.getElementById("username").value}\nåˆ†æ•¸ï¼š${scoreInput.value}\næ™‚é–“ï¼š${timeInput.value}`);
});
</script>
</body>
</html>
